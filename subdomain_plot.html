<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Datamap for Subdomain(s): Adaptive and Context-Specific Optimization</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display+SC&display=swap"
      rel="stylesheet"
    />
    <link rel="preload" href="https://fonts.gstatic.com/s/playfairdisplaysc/v17/ke85OhoaMkR6-hSn7kbHVoFf7ZfgMPr_lbkMFQ.ttf" as="font" crossorigin="anonymous" type="font/ttf" />
<link rel="preload" href="https://fonts.gstatic.com/s/playfairdisplaysc/v17/ke80OhoaMkR6-hSn7kbHVoFf7ZfgMPr_nQIpBcwXKw.ttf" as="font" crossorigin="anonymous" type="font/ttf" />
<link rel="preload" href="https://fonts.gstatic.com/s/playfairdisplaysc/v17/ke80OhoaMkR6-hSn7kbHVoFf7ZfgMPr_nTorBcwXKw.ttf" as="font" crossorigin="anonymous" type="font/ttf" />
<style>
@font-face {
  font-family: 'Playfair Display SC';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/playfairdisplaysc/v17/ke85OhoaMkR6-hSn7kbHVoFf7ZfgMPr_lbkMFQ.ttf) format('truetype');
}
@font-face {
  font-family: 'Playfair Display SC';
  font-style: normal;
  font-weight: 700;
  src: url(https://fonts.gstatic.com/s/playfairdisplaysc/v17/ke80OhoaMkR6-hSn7kbHVoFf7ZfgMPr_nQIpBcwXKw.ttf) format('truetype');
}
@font-face {
  font-family: 'Playfair Display SC';
  font-style: normal;
  font-weight: 900;
  src: url(https://fonts.gstatic.com/s/playfairdisplaysc/v17/ke80OhoaMkR6-hSn7kbHVoFf7ZfgMPr_nTorBcwXKw.ttf) format('truetype');
}

</style>

    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"
      rel="stylesheet"
    />
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"
      rel="stylesheet"
    />

    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>
    <script src="https://unpkg.com/apache-arrow@latest/Arrow.es2015.min.js"></script>
    <style>
      .datamapplot-progress-container{position:absolute;bottom:0;left:50%;transform:translate(-50%,0);width:512px;z-index:100}.datamapplot-progress-bar{width:100%;background-color:#e0e0e044;padding:3px;border-radius:6px;box-shadow:inset 0 1px 3px rgba(128,128,128,.2);margin-bottom:10px}.datamapplot-progress-bar-fill{display:block;height:12px;background-color:#659cef;border-radius:4px;transition:width 500ms ease-in-out}.datamapplot-progress-bar-text{color:white;text-align:center;line-height:12px;font-size:10px;overflow-x:visible;white-space:nowrap;vertical-align:top}
    </style>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: #000000;
        font-family: Playfair Display SC;
        color: #ffffff;
      }
      .container-box {
        margin: 16px;
        padding: 12px;
        border-radius: 16px;
        line-height: 0.95;
        z-index: 2;
        background: #000000aa;
        box-shadow: 2px 3px 10px #00000044;
      }
      .more-opaque {
        background-color: #000000ee;
      }
      #deck-container {
        width: 100vw;
        height: 100vh;
      }
      #deck-container canvas {
        z-index: 1;
        background: #000000;
      }
      .deck-tooltip {
          
            font-size: 0.8em;
            font-family: Playfair Display SC;
            font-weight: 300;
            color: #ffffff !important;
            background-color: #000000aa !important;
            border-radius: 12px;
            box-shadow: 2px 3px 10px #00000044;
            max-width: 25%;
      }
      input {
        margin: 2px;
        padding: 4px;
        border-radius: 8px;
        color: #ffffff;
        background: #000000dd;
        border: 1px solid 222222ff;
        transition: 0.5s;
        outline: none;
      }
      input:focus {
        border: 2px solid #555;
      }
      #loading {
        width: 100%;
        height: 100%;
        top: 0px;
        left: 0px;
        position: absolute;
        display: block;
        z-index: 99
      }
      #loading-image {
        position: absolute;
        top: 45%;
        left: 47.5%;
        z-index: 100
      }
      #title-container {
        position: absolute;
        top: 0;
        left: 0;
      }
      #logo-container {
        position: absolute;
        bottom: 0;
        right: 0;
      }
      img {
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
      #search-container{
        position: absolute;
        left: -16px;
        margin: 16px;
        width: fit-content;
      }
    </style>
  </head>
  <body>
    <div id="loading">
      <img
        id="loading-image"
        src="https://i.gifer.com/ZKZg.gif"
        alt="Loading..."
        width="5%"
      />
    </div>

    
    <div id="title-container" class="container-box">
      <span
        style="font-family:Playfair Display SC;font-size:36pt;color:#ffffff"
      >
        Datamap for Subdomain(s): Adaptive and Context-Specific Optimization
      </span>
      <br />
      <span
        style="font-family:Playfair Display SC;font-size:18pt;color:#777777"
      >
        An interactive visualization of selected data
      </span>

      
      <div id="search-container" class="container-box">
        <input autocomplete="off" type="search" id="text-search" placeholder="🔍" />
      </div>
      
    </div>
     
    <div id="logo-container" class="container-box">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/ArXiv_logo_2022.svg/320px-ArXiv_logo_2022.svg.png" style="width:256px" />
    </div>
    

    <div id="deck-container"></div>
    <div id="progress-container" class="datamapplot-progress-container container-box">
      <div id="point-data-progress" class="datamapplot-progress-bar">
        <span class="datamapplot-progress-bar-fill" style="width: 0%;">
          <span class="datamapplot-progress-bar-text">Point Data: 0%</span>
        </span>
      </div>
      <div id="label-data-progress" class="datamapplot-progress-bar">
        <span class="datamapplot-progress-bar-fill" style="width: 0%;">
          <span class="datamapplot-progress-bar-text">Label Data: 0%</span>
        </span>
      </div>
      <div id="meta-data-progress" class="datamapplot-progress-bar">
        <span class="datamapplot-progress-bar-fill" style="width: 0%;">
          <span class="datamapplot-progress-bar-text">Meta Data: 0%</span>
        </span>
      </div></div></body>
  <script>
    LAYER_ORDER=['dataPointLayer','boundaryLayer','LabelLayer'];function getLayerIndex(object){return LAYER_ORDER.indexOf(object.id);}
function isFontLoaded(fontName){return document.fonts.check(`12px "${fontName}"`);}
function waitForFont(fontName,maxWait=500){return new Promise((resolve,reject)=>{if(isFontLoaded(fontName)){resolve();}else{const startTime=Date.now();const interval=setInterval(()=>{if(isFontLoaded(fontName)){clearInterval(interval);resolve();}else if(Date.now()-startTime>maxWait){clearInterval(interval);reject(new Error(`Font ${fontName} did not load within ${maxWait}ms`));}},50);}});}
function getInitialViewportSize(){const width=document.documentElement.clientWidth;const height=document.documentElement.clientHeight;return{viewportWidth:width,viewportHeight:height};}
function calculateZoomLevel(bounds,viewportWidth,viewportHeight,padding=0){const lngRange=bounds[1]-bounds[0];const latRange=bounds[3]-bounds[2];const centerLng=(bounds[0]+bounds[1])/2;const centerLat=(bounds[2]+bounds[3])/2;const zoomX=Math.log2(360/(lngRange/(viewportWidth/256)));const zoomY=Math.log2(180/(latRange/(viewportHeight/256)));const zoom=Math.min(zoomX,zoomY)-padding;return{zoomLevel:zoom,dataCenter:[centerLng,centerLat]};}
class DataMap{constructor({container,bounds,searchItemId="text-search",lassoSelectionItemId="lasso-selection",}){this.container=container;this.searchItemId=searchItemId;this.lassoSelectionItemId=lassoSelectionItemId;this.pointData=null;this.metaData=null;this.layers=[];const{viewportWidth,viewportHeight}=getInitialViewportSize();const{zoomLevel,dataCenter}=calculateZoomLevel(bounds,viewportWidth,viewportHeight);this.deckgl=new deck.DeckGL({container:container,initialViewState:{latitude:dataCenter[1],longitude:dataCenter[0],zoom:zoomLevel},controller:{scrollZoom:{speed:0.01,smooth:true}},});this.updateTriggerCounter=0;this.dataSelectionManager=new DataSelectionManager(lassoSelectionItemId);}
addPoints(pointData,{pointSize,pointOutlineColor=[250,250,250,128],pointLineWidth=0.001,pointHoverColor=[170,0,0,187],pointLineWidthMaxPixels=3,pointLineWidthMinPixels=0.001,pointRadiusMaxPixels=16,pointRadiusMinPixels=0.2,}){const numPoints=pointData.x.length;const positions=new Float32Array(numPoints*2);const colors=new Uint8Array(numPoints*4);const variableSize=pointSize<0;let sizes;if(variableSize){sizes=new Float32Array(numPoints);}else{sizes=null;}
for(let i=0;i<numPoints;i++){positions[i*2]=pointData.x[i];positions[i*2+1]=pointData.y[i];colors[i*4]=pointData.r[i];colors[i*4+1]=pointData.g[i];colors[i*4+2]=pointData.b[i];colors[i*4+3]=pointData.a[i];if(variableSize){sizes[i]=pointData.size[i];}}
this.selected=new Float32Array(numPoints).fill(1.0);this.pointSize=pointSize;this.pointOutlineColor=pointOutlineColor;this.pointLineWidth=pointLineWidth;this.pointHoverColor=pointHoverColor;this.pointLineWidthMaxPixels=pointLineWidthMaxPixels;this.pointLineWidthMinPixels=pointLineWidthMinPixels;this.pointRadiusMaxPixels=pointRadiusMaxPixels;this.pointRadiusMinPixels=pointRadiusMinPixels;let scatterAttributes={getPosition:{value:positions,size:2},getFillColor:{value:colors,size:4},getFilterValue:{value:this.selected,size:1}};if(variableSize){scatterAttributes.getRadius={value:sizes,size:1};}
this.pointLayer=new deck.ScatterplotLayer({id:'dataPointLayer',data:{length:numPoints,attributes:scatterAttributes},getRadius:this.pointSize,getLineColor:this.pointOutlineColor,getLineWidth:this.pointLineWidth,highlightColor:this.pointHoverColor,lineWidthMaxPixels:this.pointLineWidthMaxPixels,lineWidthMinPixels:this.pointLineWidthMinPixels,radiusMaxPixels:this.pointRadiusMaxPixels,radiusMinPixels:this.pointRadiusMinPixels,radiusUnits:"common",lineWidthUnits:"common",autoHighlight:true,pickable:true,stroked:true,extensions:[new deck.DataFilterExtension({filterSize:1})],filterRange:[-0.5,1.5],filterSoftRange:[0.75,1.25],updateTriggers:{getFilterValue:this.updateTriggerCounter},instanceCount:numPoints,parameters:{depthTest:false}});this.layers.push(this.pointLayer);this.layers.sort((a,b)=>getLayerIndex(a)-getLayerIndex(b));this.deckgl.setProps({layers:[...this.layers]});}
addLabels(labelData,{labelTextColor=d=>[d.r,d.g,d.b],textMinPixelSize=18,textMaxPixelSize=36,textOutlineWidth=8,textOutlineColor=[238,238,238,221],textBackgroundColor=[255,255,255,64],fontFamily="Roboto",fontWeight=900,lineSpacing=0.95,textCollisionSizeScale=3.0,}){const numLabels=labelData.length;this.labelTextColor=labelTextColor;this.textMinPixelSize=textMinPixelSize;this.textMaxPixelSize=textMaxPixelSize;this.textOutlineWidth=textOutlineWidth;this.textOutlineColor=textOutlineColor;this.textBackgroundColor=textBackgroundColor;this.fontFamily=fontFamily;this.fontWeight=fontWeight;this.lineSpacing=lineSpacing;this.textCollisionSizeScale=textCollisionSizeScale;waitForFont(this.fontFamily);this.labelLayer=new deck.TextLayer({id:'LabelLayer',data:labelData,pickable:false,getPosition:d=>[d.x,d.y],getText:d=>d.label,getColor:this.labelTextColor,getSize:d=>d.size,sizeScale:1,sizeMinPixels:this.textMinPixelSize,sizeMaxPixels:this.textMaxPixelSize,outlineWidth:this.textOutlineWidth,outlineColor:this.textOutlineColor,getBackgroundColor:this.textBackgroundColor,getBackgroundPadding:[15,15,15,15],background:true,characterSet:"auto",fontFamily:this.fontFamily,fontWeight:this.fontWeight,lineHeight:this.lineSpacing,fontSettings:{"sdf":true},getTextAnchor:"middle",getAlignmentBaseline:"center",lineHeight:0.95,elevation:100,collisionEnabled:true,getCollisionPriority:d=>d.size,collisionTestProps:{sizeScale:this.textCollisionSizeScale,sizeMaxPixels:this.textMaxPixelSize*2,sizeMinPixels:this.textMinPixelSize*2},extensions:[new deck.CollisionFilterExtension()],instanceCount:numLabels,parameters:{depthTest:false}});this.layers.push(this.labelLayer);this.layers.sort((a,b)=>getLayerIndex(a)-getLayerIndex(b));this.deckgl.setProps({layers:[...this.layers]});}
addBoundaries(boundaryData,{clusterBoundaryLineWidth=0.5}){const numBoundaries=boundaryData.length;this.clusterBoundaryLineWidth=clusterBoundaryLineWidth;this.boundaryLayer=new deck.PolygonLayer({id:'boundaryLayer',data:boundaryData,stroked:true,filled:false,getLineColor:d=>[d.r,d.g,d.b,d.a],getPolygon:d=>d.polygon,lineWidthUnits:"common",getLineWidth:d=>d.size*d.size,lineWidthScale:this.clusterBoundaryLineWidth*5e-5,lineJointRounded:true,lineWidthMaxPixels:4,lineWidthMinPixels:0.0,instanceCount:numBoundaries,parameters:{depthTest:false}});this.layers.push(this.boundaryLayer);this.layers.sort((a,b)=>getLayerIndex(a)-getLayerIndex(b));this.deckgl.setProps({layers:[...this.layers]});}
addMetaData(metaData,{tooltipFunction=({index})=>this.metaData.hover_text[index],onClickFunction=null,searchField=null,}){this.metaData=metaData;this.tooltipFunction=tooltipFunction;this.onClickFunction=onClickFunction;this.searchField=searchField;if(this.metaData.hasOwnProperty('hover_text')){this.deckgl.setProps({getTooltip:this.tooltipFunction,});}
if(this.onClickFunction){this.deckgl.setProps({onClick:this.onClickFunction,});}
if(this.searchField){this.searchArray=this.metaData[this.searchField].map(d=>d.toLowerCase());}}
connectHistogram(histogramItem){this.histogramItem=histogramItem;this.histogramItemId=histogramItem.state.chart.chartContainerId;}
highlightPoints(itemId){const selectedIndices=this.dataSelectionManager.getSelectedIndices();const semiSelectedIndices=this.dataSelectionManager.getBasicSelectedIndices();const hasSelectedIndices=selectedIndices.size!==0;const hasSemiSelectedIndices=semiSelectedIndices.size!==0;const hasLassoSelection=this.dataSelectionManager.hasSpecialSelection();if(hasLassoSelection){if(hasSelectedIndices){if(hasSemiSelectedIndices){this.selected.fill(-1.0);for(let i of semiSelectedIndices){this.selected[i]=0.0;}}else{this.selected.fill(0.0);}
for(let i of selectedIndices){this.selected[i]=1.0;}}else{this.selected.fill(1.0);}}else{if(hasSelectedIndices){this.selected.fill(-1.0);for(let i of selectedIndices){this.selected[i]=1.0;}}else{this.selected.fill(1.0);}}
this.updateTriggerCounter++;const updatedPointLayer=this.pointLayer.clone({data:{...this.pointLayer.props.data,attributes:{...this.pointLayer.props.data.attributes,getFilterValue:{value:this.selected,size:1}}},updateTriggers:{getFilterValue:this.updateTriggerCounter}});const idx=this.layers.indexOf(this.pointLayer);this.deckgl.setProps({layers:[...this.layers.slice(0,idx),updatedPointLayer,...this.layers.slice(idx+1)]});if(this.histogramItem&&itemId!==this.histogramItemId){if(hasSelectedIndices){this.histogramItem.drawChartWithSelection(selectedIndices);}else{this.histogramItem.removeChartWithSelection(selectedIndices);}}}
addSelection(selectedIndices,selectionKind){this.dataSelectionManager.addOrUpdateSelectedIndicesOfItem(selectedIndices,selectionKind);this.highlightPoints(selectionKind);}
removeSelection(selectionKind){this.dataSelectionManager.removeSelectedIndicesOfItem(selectionKind);this.highlightPoints(selectionKind);}
getSelectedIndices(){return this.dataSelectionManager.getSelectedIndices();}
searchText(searchTerm){const searchTermLower=searchTerm.toLowerCase();const selectedIndices=this.searchArray.reduce((indices,d,i)=>{if(d.indexOf(searchTermLower)>=0){indices.push(i);}
return indices;},[]);if(searchTerm===""){this.dataSelectionManager.removeSelectedIndicesOfItem(this.searchItemId);}else{this.dataSelectionManager.addOrUpdateSelectedIndicesOfItem(selectedIndices,this.searchItemId);}
this.highlightPoints(this.searchItemId);}}
  </script>
  <script>
    class DataSelectionManager{constructor(specialItem){this.excludeItem=specialItem;this.selectedIndicesByItem={};this.selectedIndicesCommon=new Set();this.selectedIndicesBasicCommon=new Set();}
addOrUpdateSelectedIndicesOfItem(indices,itemId){const isNewItem=!this.selectedIndicesByItem.hasOwnProperty(itemId);this.selectedIndicesByItem[itemId]=new Set(indices);this.#updateSelectedIndicesCommon(isNewItem?itemId:null);}
removeSelectedIndicesOfItem(itemId){if(this.selectedIndicesByItem.hasOwnProperty(itemId)){delete this.selectedIndicesByItem[itemId];this.#updateSelectedIndicesCommon();}}
getSelectedIndices(){return this.selectedIndicesCommon;}
getBasicSelectedIndices(){return this.selectedIndicesBasicCommon;}
hasSpecialSelection(){return this.selectedIndicesByItem.hasOwnProperty(this.excludeItem);}#updateSelectedIndicesCommon(newItem=null){const sets=Object.values(this.selectedIndicesByItem);if(sets.length===0){this.selectedIndicesCommon=new Set();this.selectedIndicesBasicCommon=new Set();return;}
if(sets.length===1){this.selectedIndicesCommon=sets[0];if(Object.keys(this.selectedIndicesByItem)[0]!==this.excludeItem){this.selectedIndicesBasicCommon=sets[0];}else{this.selectedIndicesBasicCommon=new Set();}
return;}
if(newItem){const newSet=this.selectedIndicesByItem[newItem];this.selectedIndicesCommon=this.selectedIndicesCommon.intersection(newSet);if(newItem!==this.excludeItem){this.selectedIndicesBasicCommon=this.selectedIndicesBasicCommon.intersection(newSet);}
return;}
this.selectedIndicesCommon=sets[0];for(let i=1;i<sets.length;i++){this.selectedIndicesCommon=this.selectedIndicesCommon.intersection(sets[i]);if(this.selectedIndicesCommon.size===0){break;}}
const otherSelectionItems=Object.keys(this.selectedIndicesByItem).filter(key=>key!==this.excludeItem);this.selectedIndicesBasicCommon=this.selectedIndicesByItem[otherSelectionItems[0]];for(let i=1;i<otherSelectionItems.length;i++){const otherSelection=this.selectedIndicesByItem[otherSelectionItems[i]];this.selectedIndicesBasicCommon=this.selectedIndicesBasicCommon.intersection(otherSelection);}}}
  </script>
  <script type="module">
    async function simpleArrowParser(arrow_bytes) {
      const table = await Arrow.tableFromIPC(arrow_bytes);
      const result = {};
      table.schema.fields.forEach((field) => {
        result[field.name] = table.getChild(field.name).toArray();
      });
      return result;
    }

    if (!("CompressionStream" in window)) {
      throw new Error(
        "Your browser doesn't support the Compression Streams API " +
          "https://developer.mozilla.org/docs/Web/API/Compression_Streams_API#browser_compatibility",
      );
    }

    
    const pointDataEncoded = "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";
    const hoverDataEncoded = "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";
    const labelDataEncoded = "H4sIAFuwWmcC/13Sy26cMBQG4FdBXoNlH99nV6VRVYmoapOuSheOcBgUsBE46TRV373mMmUmK0uADp////z4g07oQLCRHCQ3YFiOfqMDYEqZBgmKmxx19tF16IBugo/uFLPS+SYeK397iqMdQmdjG3zln8KYleXdhHI0tW8uTRGYUUPTDKkhRyM6UKVz1KTTpPMxfUHTadFB8r/5IikoJooTRXQCbBSlJROCGyF2yp2LtiidHX3rm8pbX2dfhtj27duG+dA1YWzjsd85VGOyKGCelBTAzKoQ7J2CYQCtDKOcw6IgWBgiuZJsvsFZ8c39smOd7Y45gpvQD507Vf7BTs8XYXAMmhhiQAC9ZnC1Moi6ZhCsQHOhqZR0URTpiaKSAWWXvdy77qn43A9jeHW987HyKZ5jqKcseSpf2rFxWWl982Ibl16G2nVXLaXyQVMi6AYjfIXBCqOGXMMAA+eKMaHO6SQS1VKS+Wpn1kPalSKG4v5rWflPzrtx6SZLZVX+sq2dcm6Iar0J2BoNyPfRcGqMJEwZuRAk5kobAoyZi2S+++llcONrO7n0z4+ht+28G7Ud4rYnW1L7khg8J0GIlGbdWYA1Dar5trP/0/j5D46TSvQ/AwAA";
    const histogramBinDataEncoded = "None";
    const histogramIndexDataEncoded = "None";

    // Blob for the parsing worker
    const parsingWorkerBlob = new Blob([`
      self.onmessage = async function(event) {
      const { encodedData, JSONParse } = event.data;
        // Function to parse base64 to Uint8Array
        async function DecompressBytes(bytes) {
          const blob = new Blob([bytes]);
          const decompressedStream = blob.stream().pipeThrough(
            new DecompressionStream("gzip")
          );
          const arr = await new Response(decompressedStream).arrayBuffer()
          return new Uint8Array(arr);
        }
        async function decodeBase64WithProgress(base64) {
          const totalLength = base64.length;
          const chunkSize = 1024 * 1024; // 1MB chunks
          let decodedArray = new Uint8Array(Math.ceil(totalLength * 3 / 4));
          let offset = 0;

          for (let i = 0; i < totalLength; i += chunkSize) {
            const chunk = base64.slice(i, i + chunkSize);
            const decodedChunk = Uint8Array.from(atob(chunk), c => c.charCodeAt(0));
            decodedArray.set(decodedChunk, offset);
            offset += decodedChunk.length;

            const progress = Math.min(100, Math.round((i + chunkSize) / totalLength * 100));
            self.postMessage({ type: 'progress', progress: progress });

            // Allow other operations to occur
            await new Promise(resolve => setTimeout(resolve, 0));
          }

          return decodedArray.slice(0, offset);
        }
        const binaryData = await decodeBase64WithProgress(encodedData).then(buffer => DecompressBytes(buffer));

        if (JSONParse) {
          const parsedData = JSON.parse(new TextDecoder("utf-8").decode(binaryData));
          self.postMessage({ data: parsedData });
        } else {
          // Send the parsed table back to the main thread
          self.postMessage({ type: "data", data: binaryData });
        }
      }
    `], { type: 'application/javascript' });
    const workerUrl = URL.createObjectURL(parsingWorkerBlob);
    const searchItemId = "text-search";
    const histogramItemId = "d3histogram-container";
    const selectionItemId = "lasso-select";
    const searchItem = document.getElementById(searchItemId);
    let histogramItem = null;
    
    const container = document.getElementById('deck-container');

    const labelDataWorker = new Worker(workerUrl);
    const pointDataWorker = new Worker(workerUrl);
    const metaDataWorker = new Worker(workerUrl);
    const datamap = new DataMap({
      container: container,
      bounds: [-5.30836820602417, 4.475309371948242, -7.4777607917785645, 7.157085418701172],
      searchItemId: searchItemId,
      lassoSelectionItemId: selectionItemId,      
    });

    function updateProgressBar(id, progress) {
      const progressBar = document.querySelector(`#${id} .datamapplot-progress-bar-fill`);
      const progressText = document.querySelector(`#${id} .datamapplot-progress-bar-text`);
      progressBar.style.width = `${progress}%`;
      progressText.textContent = `${id.replace('-progress', '').replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}: ${progress}%`;
    }

    function checkAllDataLoaded() {
      const progressBars = document.querySelectorAll('.datamapplot-progress-bar-fill');
      const allLoaded = Array.from(progressBars).every(bar => bar.style.width === '100%');
      if (allLoaded) {
        document.getElementById("loading").style.display = "none";
        document.getElementById("progress-container").style.display = "none";
      }
    }

    function loadPointDataLayer() {
      pointDataWorker.postMessage({encodedData: pointDataEncoded, JSONParse: false});

      pointDataWorker.onmessage = async function(event) {
        if (event.data.type === "progress") {
          updateProgressBar('point-data-progress', event.data.progress);
        } else {
          const { data } = event.data;
          const pointData = await simpleArrowParser(data);
          datamap.addPoints(
            pointData,
            {
              pointSize: 0.1,
              pointOutlineColor: [5, 5, 5, 128],
              pointLineWidth: 0.001,
              pointHoverColor: [170, 0, 0, 187],
              pointLineWidthMaxPixels: 3,
              pointLineWidthMinPixels: 0.001,
              pointRadiusMaxPixels: 24,
              pointRadiusMinPixels: 0.01,
            }
          );document.getElementById("loading").style.display = "none";
          updateProgressBar('point-data-progress', 100);
          checkAllDataLoaded();
        }
      };
    }

    function loadLabelDataLayer() {
      labelDataWorker.postMessage({encodedData: labelDataEncoded, JSONParse: true});

      labelDataWorker.onmessage = async function(event) {
        if (event.data.type === "progress") {
          updateProgressBar('label-data-progress', event.data.progress);
        } else {
          const { data } = event.data;
          const labelData = data;
          datamap.addLabels(labelData, {
            labelTextColor: d => [d.r, d.g, d.b],
            textMinPixelSize: 18,
            textMaxPixelSize: 36,
            textOutlineWidth: 8,
            textOutlineColor: [17, 17, 17, 221],
            textBackgroundColor: [0, 0, 0, 64],
            fontFamily: "Playfair Display SC",
            fontWeight: 600,
            lineSpacing: 0.95,
            textCollisionSizeScale: 3,
          });

          
          document.getElementById("loading").style.display = "none";
          updateProgressBar('label-data-progress', 100);
          checkAllDataLoaded();
        }
      };
    }

    function loadMetaData() {
      metaDataWorker.postMessage({encodedData: hoverDataEncoded, JSONParse: true});

      metaDataWorker.onmessage = async function(event) {
        if (event.data.type === "progress") {
          updateProgressBar('meta-data-progress', event.data.progress);
        } else {
          const { data } = event.data;
          const hoverData = data;
          datamap.addMetaData(hoverData, {
            tooltipFunction: ({index}) => hoverData.hover_text[index],
            onClickFunction: null,
            searchField: "hover_text",
          });

          
          function debounce(func, timeout = 250){
              let timer;
              return (...args) => {
                  clearTimeout(timer);
                  timer = setTimeout(() => { func.apply(this, args); }, timeout);
              };
          }

          /* Search */
          searchItem.addEventListener("input", debounce(event => datamap.searchText(event.target.value)));
          updateProgressBar('meta-data-progress', 100);
          checkAllDataLoaded();
        }
      };
    }

    loadPointDataLayer();
    loadLabelDataLayer();
    loadMetaData();</script>
</html>